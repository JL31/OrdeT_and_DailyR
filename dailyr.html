<!DOCTYPE html>
<html lang="fr" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DailyR</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="css/dailyr.css"></style>
  <script src="js/unified_storage.js"></script>
</head>
<body>
  <!-- Navbar fixe -->
  <nav class="navbar is-dark is-fixed-top" role="navigation">
    <div class="navbar-brand">
      <a class="navbar-item" href="dailyr.html">
        <strong>DailyR</strong>
      </a>
    </div>

    <div class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="index.html">
          <span>&lt;&lt;&lt; Back to OrdeT</span>
        </a>
      </div>

      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">
            <span class="icon"><i class="fas fa-plus"></i></span>
            <span>Ajouter</span>
          </a>
          <div class="navbar-dropdown">
            <a class="navbar-item" id="navbar-add-entry">
              <span class="icon"><i class="fas fa-plus-circle"></i></span>
              <span>Nouvel Élément</span>
            </a>
            <hr class="navbar-divider">
            <a class="navbar-item" id="navbar-add-from-task">
              <span class="icon"><i class="fas fa-link"></i></span>
              <span>Depuis Tâche Existante</span>
            </a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">
            <span class="icon"><i class="fas fa-cog"></i></span>
            <span>Données</span>
          </a>
          <div class="navbar-dropdown">
            <a class="navbar-item" id="navbar-jira-url">
              <span class="icon"><i class="fas"></i></span>
              <span>URL Jira</span>
            </a>
            <a class="navbar-item" id="navbar-export">
              <span class="icon"><i class="fas fa-download"></i></span>
              <span>Exporter</span>
            </a>
            <label class="navbar-item" for="navbar-import-file">
              <span class="icon"><i class="fas fa-upload"></i></span>
              <span>Importer</span>
              <input type="file" id="navbar-import-file" accept="application/json" style="display: none;">
            </label>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <main class="container is-fluid">
    <section class="group">
      <div class="group-header">
        <span class="arrow">▼</span>
        <span class="icon"><i class="fas fa-check-circle has-text-success"></i></span>
        <span>Ce que j'ai fait</span>
      </div>
      <div class="group-content" id="fait-container"></div>
    </section>

    <section class="group">
      <div class="group-header">
        <span class="arrow">▼</span>
        <span class="icon"><i class="fas fa-clock has-text-warning"></i></span>
        <span>Ce que je vais faire</span>
      </div>
      <div class="group-content" id="afaire-container"></div>
    </section>

    <section class="group">
      <div class="group-header">
        <span class="arrow">▼</span>
        <span class="icon"><i class="fas fa-sticky-note has-text-info"></i></span>
        <span>Notes libres</span>
      </div>
      <div class="group-content" id="notes-container"></div>
    </section>
  </main>

  <!-- Modal pour nouvel élément -->
  <div class="modal" id="modal-entry">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Ajouter / Modifier un élément</p>
        <button class="delete modal-close"></button>
      </header>
      <section class="modal-card-body">
        <form id="form-entry">
          <div class="field">
            <label class="label">Section</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="section" required>
                  <option value="fait">Ce que j'ai fait</option>
                  <option value="afaire">Ce que je vais faire</option>
                  <option value="notes">Notes libres</option>
                </select>
              </div>
            </div>
          </div>

          <div class="field">
            <label class="label">Référence sujet</label>
            <div class="control">
              <input class="input" type="text" name="reference">
            </div>
            <p class="help">Référence Jira ou autre identifiant</p>
          </div>

          <div class="field">
            <label class="label">Description</label>
            <div class="control">
              <input class="input" type="text" name="description" required>
            </div>
          </div>

          <div class="field">
            <label class="label">Commentaire</label>
            <div class="control">
              <textarea class="textarea" name="commentaire" rows="3"></textarea>
            </div>
          </div>

          <div class="field">
            <div class="control">
              <label class="checkbox">
                <input type="checkbox" name="urgent">
                Marquer comme urgent
              </label>
            </div>
          </div>
        </form>
      </section>
      <footer class="modal-card-foot">
        <button class="button is-success" type="submit" form="form-entry">Valider</button>
        <button class="button modal-close">Annuler</button>
      </footer>
    </div>
  </div>

  <!-- Modal pour sélectionner une tâche existante -->
  <div class="modal" id="modal-task-selector">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Sélectionner une tâche existante</p>
        <button class="delete modal-close"></button>
      </header>
      <section class="modal-card-body">
        <div class="field">
          <label class="label">Rechercher</label>
          <div class="control has-icons-left">
            <input class="input" type="text" id="task-search" placeholder="Rechercher une tâche...">
            <span class="icon is-small is-left">
              <i class="fas fa-search"></i>
            </span>
          </div>
        </div>

        <div class="field">
          <label class="label">Section de destination</label>
          <div class="control">
            <div class="select is-fullwidth">
              <select id="target-section">
                <option value="fait">Ce que j'ai fait</option>
                <option value="afaire">Ce que je vais faire</option>
                <option value="notes">Notes libres</option>
              </select>
            </div>
          </div>
        </div>

        <div class="task-selector" id="task-list"></div>
      </section>
      <footer class="modal-card-foot">
        <button class="button is-success" id="add-selected-task" disabled>Ajouter la tâche sélectionnée</button>
        <button class="button modal-close">Annuler</button>
      </footer>
    </div>
  </div>

  <!-- Modal de confirmation de suppression -->
  <div class="modal" id="modal-confirm-delete">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Confirmation</p>
        <button class="delete modal-close"></button>
      </header>
      <section class="modal-card-body">
        <p>Voulez-vous vraiment supprimer cet élément ?</p>
      </section>
      <footer class="modal-card-foot">
        <button class="button is-danger" id="confirm-delete-btn">Oui, supprimer</button>
        <button class="button modal-close">Non, annuler</button>
      </footer>
    </div>
  </div>

  <!-- Modal de définition de l'URL pour Jira -->
  <div class="modal" id="modal-set-jira-url">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Définition de l'URL Jira</p>
        <button class="modal-close"></button>
      </header>
      <section class="modal-card-body">
        <div class="field">
          <label class="label">URL vers le projet Jira</label>
          <div class="control">
            <input class="input" type="text" name="jira-url" id="jira-url-id">
          </div>
        </div>
      </section>
      <footer class="modal-card-foot">
        <button class="button is-success" id="set-jira-url">Valider</button>
        <button class="button modal-close">Annuler</button>
      </footer>
    </div>
  </div>

  <script src="dailyr.js"></script>
</body>
</html>
